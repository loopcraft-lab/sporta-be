BRANCH=$(git rev-parse --abbrev-ref HEAD)
REGEX="^(feature|bugfix|hotfix|release|merge|chore|migrate)\/([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*)$"

# RED='\033[0;31m'
# GREEN='\033[0;32m'
# NC='\033[0m'
echo
# echo "Branch name: ${GREEN}$BRANCH${NC}"
# if ! echo "$BRANCH" | grep -qE "$REGEX"; then
#   echo "${RED}Your commit was rejected due to branching name"
#   echo "Please rename your branch with '(feature|bugfix|hotfix|release|merge|chore|migrate)(/<ticket>?)/<subject-example>' syntax${NC}"
#   exit 1
# fi

echo "Branch name: $BRANCH"
if ! echo "$BRANCH" | grep -qE "$REGEX"; then
  echo "Your commit was rejected due to branching name"
  echo "Please rename your branch with '(feature|bugfix|hotfix|release|merge|chore|migrate)(/<ticket>?)/<subject-example>' syntax"
  exit 1
fi

echo
echo "ðŸ§¹ Running lint-staged..."
pnpm lint-staged

echo
echo "ðŸ¤– Building..."
pnpm build

echo "âœ… Pre-commit checks passed!"
echo
